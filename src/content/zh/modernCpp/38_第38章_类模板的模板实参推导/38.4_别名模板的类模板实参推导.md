# 38.4 别名模板的类模板实参推导

C++20标准支持了别名模板的类模板实参推导，顾名思义该特性结合了别名模板和类模板实参推导的两种特性。让我们看一看提案文档提供的示例代码：

```txt
template<class T, class U> struct C {
    C(T, U) {}
};
template<class V> using A = C<V*, V*>; 
int i{}; double d{}; 
A a1(&i, &i); //编译成功，可以推导为A<int> 
A a2(i, i); //编译失败，i无法推导为V* 
A a3(&i, &d); //编译失败，(int *, double *)无法推导为(V*, V*)
```

在上面的代码中，A是C的别名模板，它约束C的两个模板参数为相同类型的指针V*。在推导过程中，A a1(&i, &i);可以编译成功，因为构造函数推导出来的两个实参类型都是int *符合V*,最终推导为A<int>。而对于A a2(i, i);，由于实参推导出来的不是指针类型，因此推导失败无法编译。同样，A a3(&i, &d);虽然符合实参推导结果为指针的要求，但是却违反了两个指针类型必须相同的

规则，结果也是无法编译的。最后需要说明的是，到目前为止只有GCC对该特性做了支持。


# 18.2 支持初始化语句的switch

和if控制结构一样，switch在通过条件判断确定执行的代码分支之前也可以接受一个初始化语句。不同的是，switch结构不存在else和elseif的情况，所以语法更加简单。这里以

std::condition_variable为例，其成员函数wait_for需要一

个std:: unique_lock<std::_mutex>&类型的实参，于是在

switch的初始化语句中可以构造一个

std::unique_lock<std::_mutex>类型的对象，具体代码如下：

```cpp
include <condition_variable> #include <chrono> using namespace std::chrono_literals; std::condition_variable cv; std::_mutex cv_m; int main() { switch (std::unique_lock<std::_mutex> lk(cv_m); cv.wait_for(lk, 100ms)) { case std::cv_status::timeout: break; case std::cv_status::no_timeout: break; } }
```

switch初始化语句声明的变量的生命周期会贯穿整个switch结构，这一点和if也相同，所以变量lk能够引用到任何一个case的分支中。

